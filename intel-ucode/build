# SPDX-License-Identifier: MPL-2.0

# Copyright Â© 2018-2026 Firas Khana

# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.

prepare() {
  cd "$tmp"/$nom/Intel-Linux-Processor-Microcode-Data-Files-microcode-$ver

  mkdir -p kernel/x86/microcode
}

build() {
  iucode_tool \
    --write-earlyfw=$nom.img $nom/ $nom-with-caveats/ \
    --overwrite
}

package() {
  mkdir -p "$dir"/boot
  mv -f $nom.img "$dir"/boot
}
