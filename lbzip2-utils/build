# Copyright (c) 2018-2024, Firas Khalil Khana
# Distributed under the terms of the ISC License

# Voyager: Firas Khalil Khana (firasuke) <firasuke@glaucuslinux.org>

prepare() {
  ./autogen.sh
}

configure() {
  glaucus-configure
}

build() {
  make
}

check() {
  :
}

package() {
  make \
    DESTDIR="$SACD" \
    install-strip

  # Compatibility symlinks
  ln -fnsv lbzcmp "$SACD"/usr/bin/bzcmp
  ln -fnsv lbzdiff "$SACD"/usr/bin/bzdiff
  ln -fnsv lbzegrep "$SACD"/usr/bin/bzegrep
  ln -fnsv lbzexe "$SACD"/usr/bin/bzexe
  ln -fnsv lbzfgrep "$SACD"/usr/bin/bzfgrep
  ln -fnsv lbzforce "$SACD"/usr/bin/bzforce
  ln -fnsv lbzgrep "$SACD"/usr/bin/bzgrep
  ln -fnsv lbzrecover "$SACD"/usr/bin/bzip2recover
  ln -fnsv lbzless "$SACD"/usr/bin/bzless
  ln -fnsv lbzmerge "$SACD"/usr/bin/bzmerge
  ln -fnsv lbzmore "$SACD"/usr/bin/bzmore

  ln -fnsv lbzcmp.1 "$SACD"/usr/share/man/man1/bzcmp.1
  ln -fnsv lbzdiff.1 "$SACD"/usr/share/man/man1/bzdiff.1
  ln -fnsv lbzegrep.1 "$SACD"/usr/share/man/man1/bzegrep.1
  ln -fnsv lbzexe.1 "$SACD"/usr/share/man/man1/bzexe.1
  ln -fnsv lbzfgrep.1 "$SACD"/usr/share/man/man1/bzfgrep.1
  ln -fnsv lbzforce.1 "$SACD"/usr/share/man/man1/bzforce.1
  ln -fnsv lbzgrep.1 "$SACD"/usr/share/man/man1/bzgrep.1
  ln -fnsv lbzrecover.1 "$SACD"/usr/share/man/man1/bzip2recover.1
  ln -fnsv lbzless.1 "$SACD"/usr/share/man/man1/bzless.1
  ln -fnsv lbzmerge.1 "$SACD"/usr/share/man/man1/bzmerge.1
  ln -fnsv lbzmore.1 "$SACD"/usr/share/man/man1/bzmore.1
  ln -fnsv lbzdiff.1 "$SACD"/usr/share/man/man1/lbzcmp.1
  ln -fnsv lbzgrep.1 "$SACD"/usr/share/man/man1/lbzegrep.1
  ln -fnsv lbzgrep.1 "$SACD"/usr/share/man/man1/lbzfgrep.1
}
